[Test]
title Test "Connect and Close VMBX engine"
create vmbxenginetest test

// Connecting and closing. If this fails nothing can be tested.
test Connect
test Close

delete test
[Endtest] 

[Test]
title Test "GetNumFromSpecialMem 111111"
create vmbxenginetest test

test Connect
bringtoforeground

test InitGetNumFromSpecialMem 111111 // save a number to the sim/phone memory
test TestGetNumFromSpecialMem 111111 // get the number we had just saved from the sim/phone memory,
                                   // if not, the number should be saved to the incorect location in last step.

test CleanupGetNumFromSpecialMem // revert the source number to sim/phone memory 

sendtobackground
test Close
delete test
[Endtest] 

[Test]
title Test "SelectTypeL" 
create vmbxenginetest test

test Connect
bringtoforeground

test SelectTypeL 

sendtobackground
test Close
delete test
[Endtest] 

[Test]
title Test "Editing allowed" (Default configuration)
create vmbxenginetest test

test Connect
bringtoforeground

test ConfCenRepForEditAllowedL

allownextresult 1 // must return 1 as user is  allowed to change number
test AllowedToChangeTheNumber 

sendtobackground
test Close
delete test
[Endtest] 

// This case can be never passed on emulator,  
// because the updating central repository is not supported by emulator.
// It has to be done on hardware.
[Test]
title Test "Editing not allowed" (Configuration needed)
create vmbxenginetest test

test ConfCenRepForEditNotAllowedL // cenreq configuration need to be set '1' 

test Connect
bringtoforeground

allownextresult 0 // must return 0 as user is not allowed to change number
test AllowedToChangeTheNumber 

sendtobackground
test Close

test RevertCenRepEditNotAllowedL // revert cenreq key

delete test
[Endtest] 

// This case can be never passed on emulator, because sim feature is not supported.
// And the updating central repository is not supported by emulator.
// It has to be done on hardware.
[Test]
title Test "SIM only + note" (Operator configuration)
create vmbxenginetest test

test ConfCenRepForEditNotAllowedL // cenreq configuration need to be set '1'

test Connect
bringtoforeground

allownextresult 1 
test IsSimMemory // should return 1 in this config

allownextresult 0 
test AllowedToChangeTheNumber // must return 0 as user is not allowed to change number

test InitGetNumFromSpecialMem  // This method should save a empty number to trigger a note to UI

allownextresult -1
test TestGetNumFromSpecialMem

test CleanupGetNumFromSpecialMem // revert the source number to sim/phone memory

sendtobackground
test Close

test RevertCenRepEditNotAllowedL // revert cenreq key

delete test
[Endtest] 

// This case can be never passed on emulator, because sim feature is not supported.
// And the updating central repository is not supported by emulator.
// It has to be done on hardware.
[Test]
title Test "SIM only: Saving number to the sim memory according to simulate OMA" (Operator configuration)
create vmbxenginetest test

test ConfCenRepForEditNotAllowedL // cenreq configuration need to be set '1'

test Connect
bringtoforeground

allownextresult 1 
test IsSimMemory // should return 1 in this config

allownextresult 0 
test AllowedToChangeTheNumber // must return 0 as user is not allowed to change number

test InitGetNumFromSpecialMem 123456 // save the number to sim memory
test TestGetNumFromSpecialMem 123456 // get the number we had just saved from the sim memory,
                                   // if not, the number should be saved to the incorect location in last step.
test CleanupGetNumFromSpecialMem // revert the source number to sim memory

sendtobackground
test Close

test RevertCenRepEditNotAllowedL // revert cenreq key

delete test
[Endtest]

// This case can be never passed on emulator, because sim feature is not supported.
// And the updating central repository is not supported by emulator.
// It has to be done on hardware.
[Test]
title Test "SIM only: QueryVideoMbxNumber" (Operator configuration)
create vmbxenginetest test

test ConfCenRepForEditNotAllowedL // cenreq configuration need to be set '1'

test Connect
bringtoforeground

allownextresult -21 
test QueryVideoMbxNumber 0 // Should leave with KErrAccessDenied

sendtobackground
test Close

test RevertCenRepEditNotAllowedL // revert cenreq key

delete test
[Endtest] 

// This case can be never passed on emulator, because sim feature is not supported.
// And the updating central repository is not supported by emulator.
// It has to be done on hardware.
[Test]
title Test "SIM only: QueryNumberL" (Operator configuration)
create vmbxenginetest test

test ConfCenRepForEditNotAllowedL // cenreq configuration need to be set '1'

test Connect
bringtoforeground

allownextresult -21 
test QueryNumberL 0 // Should leave with KErrAccessDenied

sendtobackground
test Close

test RevertCenRepEditNotAllowedL // revert cenreq key

delete test
[Endtest]

// This case can be never passed on emulator, 
// because the video feature is not supported.
// It has to be done on hardware.
[Test]
title Test "GetVideoMbxNumber"
create vmbxenginetest test

test Connect
bringtoforeground

test GetVideoMbxNumber

sendtobackground
test Close
delete test
[Endtest]

